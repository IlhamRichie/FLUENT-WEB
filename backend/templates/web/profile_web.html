{% extends "base.html" %}

{% block title %}Profil Pengguna - FLUENT{% endblock %}

{% block content %}
<div class="container mt-5 mb-5" style="min-height: 70vh;">
    <div class="row justify-content-center">
        
        <!-- Kolom Kiri: Profil Pengguna -->
        <div class="col-lg-7 col-md-12 mb-4 mb-lg-0">
            <div class="card shadow-lg h-100">
                <div class="card-header bg-primary-dark text-white">
                    <h3 class="mb-0">Profil Pengguna</h3>
                </div>
                <div class="card-body p-4">
                    {% if user %}
                        <div class="text-center mb-4">
                            {% if user.profile_picture %}
                                <img src="{{ user.profile_picture }}" alt="Foto Profil {{ user.username }}" 
                                     class="img-thumbnail rounded-circle" style="width: 150px; height: 150px; object-fit: cover;">
                            {% else %}
                                <div class="avatar-title rounded-circle bg-secondary text-white" 
                                     style="width: 150px; height: 150px; font-size: 4rem; display: flex; align-items: center; justify-content: center; margin: auto;">
                                    {{ user.username[0]|upper if user.username else 'U' }}
                                </div>
                            {% endif %}
                            <h4 class="mt-3 mb-1">{{ user.username }}</h4>
                            <p class="text-muted">{{ user.email }}</p>
                        </div>

                        <hr>
                        
                        <h5 class="text-primary">Detail Akun:</h5>
                        <ul class="list-group list-group-flush mb-4">
                            <li class="list-group-item"><strong>Gender:</strong> {{ user.gender or "Tidak disebutkan" }}</li>
                            <li class="list-group-item"><strong>Pekerjaan:</strong> {{ user.occupation or "Tidak disebutkan" }}</li>
                            <li class="list-group-item"><strong>Bergabung pada:</strong> {{ user.created_at.strftime('%d %B %Y') if user.created_at else 'N/A' }}</li>
                            <li class="list-group-item"><strong>Login Terakhir:</strong> {{ user.last_login.strftime('%d %B %Y, %H:%M:%S UTC') if user.last_login else 'Belum pernah' }}</li>
                            <li class="list-group-item"><strong>Provider Autentikasi:</strong> 
                                <span class="badge rounded-pill text-bg-{{ 'primary' if user.auth_provider == 'google' else 'secondary' }}">{{ user.auth_provider|capitalize }}</span>
                            </li>
                        </ul>


                        <h5 class="text-center fluent-red-text mb-3">Gunakan Aplikasi Mobile FLUENT!</h5>
                        <p class="text-center">
                            Untuk pengalaman interview yang lebih interaktif dan analisis mendalam,
                            silakan unduh dan gunakan aplikasi mobile FLUENT kami.
                        </p>
                        <div class="text-center mt-3 mb-4">
                            <!-- UBAH INI: Pastikan path static benar -->
                            <img src="{{ url_for('web.web_serve_static', filename='images/fluent-logo.png') }}" alt="FLUENT Mobile App" style="max-width: 100px;">
                            <p class="mt-2"><em>(Segera hadir di Play Store & App Store)</em></p>
                        </div>
                        
                        <div class="d-grid gap-2">
                             <!-- UBAH INI: url_for logout -->
                             <a href="{{ url_for('web.web_logout_route') }}" class="btn btn-outline-danger">
                                <i class="fas fa-sign-out-alt me-2"></i> Logout
                            </a>
                        </div>

                    {% else %}
                        <!-- UBAH INI: url_for login -->
                        <p class="alert alert-warning">Informasi pengguna tidak ditemukan. Silakan <a href="{{ url_for('web.web_login_route') }}">login kembali</a>.</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Kolom Kanan: QR Code untuk Aplikasi Mobile -->
        <div class="col-lg-5 col-md-12">
            <div class="card shadow-lg h-100">
                <div class="card-header bg-primary-dark text-white">
                    <h3 class="mb-0">Unduh Aplikasi Mobile</h3>
                </div>
                <div class="card-body p-4 text-center d-flex flex-column justify-content-center align-items-center">
                    <p>Scan kode QR di bawah ini untuk mengunduh aplikasi FLUENT di perangkat mobile Anda.</p>
                    <!-- UBAH INI: Pastikan path static benar untuk hihi.jpg atau ganti dengan QR code yang benar -->
                    <img src="{{ url_for('web.web_serve_static', filename='images/hihi.jpg') }}" 
                         alt="QR Code untuk Aplikasi FLUENT" 
                         class="img-fluid mb-3" 
                         style="max-width: 300px; border: 1px solid #ddd; padding: 5px; border-radius: 5px;"> {# Ukuran disesuaikan #}
                    <p class="small text-muted">
                        Arahkan kamera ponsel Anda ke kode ini.
                    </p>
                    <div class="mt-auto">
                        <a href="#" class="btn btn-sm btn-outline-primary me-2 disabled" aria-disabled="true">
                            <i class="fab fa-google-play"></i> Google Play (Segera)
                        </a>
                        <a href="#" class="btn btn-sm btn-outline-dark disabled" aria-disabled="true">
                            <i class="fab fa-apple"></i> App Store (Segera)
                        </a>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<style>
.bg-primary-dark {
    /* Ganti dengan variabel CSS Anda atau warna langsung jika tidak menggunakan variabel */
    /* background-color: var(--primary-dark, #2c3e50) !important;  Contoh dengan fallback */
    background-color: #343a40 !important; /* Contoh warna dark standar bootstrap */
}
.fluent-red-text {
    /* color: var(--primary-dark, #e74c3c); Contoh dengan fallback */
    color: #dc3545; /* Contoh warna merah standar bootstrap */
}
.card-body.d-flex {
    min-height: 300px;
}
.avatar-title { /* Styling untuk avatar inisial jika tidak ada gambar profil */
    font-weight: 500;
}
.list-group-item {
    border-left: 0;
    border-right: 0;
}
.list-group-item:first-child {
    border-top-left-radius: 0;
    border-top-right-radius: 0;
    border-top:0;
}
.list-group-item:last-child {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    border-bottom:0;
}
</style>
{% endblock %}